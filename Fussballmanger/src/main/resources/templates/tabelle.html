<!DOCTYPE html>
<html>
<head th:replace="fragments/header :: head">
	<link rel="stylesheet" href="/tabelle.css" />
</head>
<body>
	<div th:replace="fragments/header :: header"></div>
	<div class="container">
		<h2>Tabelle</h2>
	</div>
	<div class="container" id="containerBody">
		<div class="alert alert-success" th:if="${successMessage}">
  			<strong><p th:utext="${successMessage}"></p></strong>
		</div>
		<div class="alert alert-danger" th:if="${errorMessage}">
  			<strong><p th:utext="${errorMessage}"></p></strong>
		</div>
		<div class="col-md-12">
			<p>Land:</p>
			<form action="#" th:action="@{/liga/}+${landName}+'/'+${ligaName}+'/land'" th:object="${land}"
					method="post">
				<select class="custom-select" th:field="*{landNameTyp}" onchange="this.form.submit();">
					<option 
						  th:each="land : ${alleLaender}" 
						  th:text="${land.landNameTyp.name}"
						  th:value="${land.landNameTyp}">
					</option>
				</select>
			</form>
			<p>Liga:</p>
			<form action="#" th:action="@{/liga/}+${landName}+'/'+${ligaName}+'/liga'" th:object="${liga}"
					method="post">
				<select class="custom-select" th:field="*{ligaNameTyp}" onchange="this.form.submit();">
					<option 
						  th:each="liga : ${alleLigenEinesLandes}" 
						  th:text="${liga.ligaNameTyp.name}"
						  th:value="${liga.ligaNameTyp}">
					</option>
				</select>
			</form>
			<table class="table table-hover">
				<thead>
					<tr class="table-active">
						<th scope="col">Spieltag</th>
						<th scope="col">Spielbeginn</th>
						<th scope="col">Heimmannschaft</th>
						<th scope="col">Ergebnis</th>
						<th scope="col">Gastmannschaft</th>
					</tr>
				</thead>
				<tr class="" th:each="spielEintrag : ${findeAlleSpieleEinerLigaEinerSaisonEinesSpieltages}">
					<td th:text="${spielEintrag.spieltag}" />
					<td th:text="${spielEintrag.spielbeginnToString()}" />
					<td>
						<a th:text="${spielEintrag.heimmannschaftUndStaerkeToString()}" th:href="@{/team/}+${spielEintrag.heimmannschaft.id}"></a>
					</td>
					<td class="ergebnisInTabelle">
						<a class="" th:href="@{/spiel/}+${spielEintrag.id}">
							<span th:text="${spielEintrag.spielErgebnisToString()}"></span><br>
							<span th:text="${spielEintrag.spielErgebnisHalbzeitToString()}"></span>
						</a>
					</td>
					<td>
						<a th:text="${spielEintrag.gastmannschaftUndStaerkeToString()}" th:href="@{/team/}+${spielEintrag.gastmannschaft.id}"></a>
					</td>
				</tr>
			</table>
			<p>Saison:</p>
			<form action="#" th:action="@{/liga/}+${landName}+'/'+${ligaName}+'/saison'" th:object="${saison}"
					method="post">
				<select class="custom-select" th:field="*{saisonNummer}" onchange="this.form.submit();">
					<option 
						  th:each="saison : ${alleSaisons}" 
						  th:text="${saison.saisonNummer}"
						  th:value="${saison.saisonNummer}">
					</option>
				</select>
			</form>
			<p>Spieltag:</p>
			<form action="#" th:action="@{/liga/}+${landName}+'/'+${ligaName}+'/spieltag'" th:object="${spieltag}"
					method="post">
				<select class="custom-select" th:field="*{spieltagNummer}" onchange="this.form.submit();">
					<option 
						  th:each="spieltag : ${alleSpieltage}" 
						  th:text="${spieltag.spieltagNummer}"
						  th:value="${spieltag.spieltagNummer}">
					</option>
				</select>
			</form>
		</div>
		<div class="col-md-12">
			<table class="table table-hover">
				<thead>
					<tr class="table-active">
						<th scope="col">#</th>
						<th scope="col">Name</th>
						<th scope="col">Spiele</th>
						<th scope="col">Siege</th>
						<th scope="col">Unentschieden</th>
						<th scope="col">Niederlagen</th>
						<th scope="col">Tore</th>
						<th scope="col">Gegentore</th>
						<th scope="col">+/-</th>
						<th scope="col">Punkte</th>
					</tr>
				</thead>
				<tr th:if="${ligaName} != '1'" class="" th:each="eintrag, stat : ${alleTeamsDerAktuellenLiga}" 
					th:classappend="${(stat.index == 0 or stat.index == 1 ? 'table-success' : '') + 
					(stat.index == 14 or stat.index == 15 or stat.index == 16 or stat.index == 17 ? 'table-danger' : '')}" >
					<td th:text="${eintrag.platzierung}" />
					<td> 
						<a class="" th:text="${eintrag.teamName}" th:href="@{/team/}+${eintrag.id}"></a>
					</td>
					<td th:text="${eintrag.spiele}" />
					<td th:text="${eintrag.siege}" />
					<td th:text="${eintrag.unentschieden}" />
					<td th:text="${eintrag.niederlagen}" />
					<td th:text="${eintrag.tore}" />
					<td th:text="${eintrag.gegentore}" />
					<td th:text="${eintrag.torDifferenz}" />
					<td th:text="${eintrag.punkte}" />
				</tr>
				<tr th:if="${ligaName} == '1'" class="" th:each="eintrag, stat : ${alleTeamsDerAktuellenLiga}" 
					th:classappend="${(stat.index == 0 or stat.index == 1 ? 'table-success' : '') + 
					(stat.index == 2 or stat.index == 3 ? 'table-primary' : '') +
					(stat.index == 14 or stat.index == 15 or stat.index == 16 or stat.index == 17 ? 'table-danger' : '')}" >
					<td th:text="${eintrag.platzierung}" />
					<td> 
						<a class="" th:text="${eintrag.teamName}" th:href="@{/team/}+${eintrag.id}"></a>
					</td>
					<td th:text="${eintrag.spiele}" />
					<td th:text="${eintrag.siege}" />
					<td th:text="${eintrag.unentschieden}" />
					<td th:text="${eintrag.niederlagen}" />
					<td th:text="${eintrag.tore}" />
					<td th:text="${eintrag.gegentore}" />
					<td th:text="${eintrag.torDifferenz}" />
					<td th:text="${eintrag.punkte}" />
				</tr>
			</table>
		</div>
	</div>
	<th:block th:replace="fragments/header :: scripts" />
</body>
</html>